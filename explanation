2. كيفية تشغيل الـ Cron Job
الـ Cron Job هو مؤقت يعمل على خادمك (Server) لتنفيذ أوامر معينة في أوقات محددة. لتشغيل أمر الجرد المجدول تلقائيًا، اتبع الخطوات التالية:

الاتصال بالخادم: استخدم SSH للاتصال بالخادم الذي يستضيف مشروع Laravel الخاص بك.

Bash

ssh user@your_server_ip
فتح محرر Crontab: Crontab هو الملف الذي يحتوي على جميع المهام المجدولة. افتحه باستخدام الأمر التالي:

Bash

crontab -e
إذا كنت تفتح الملف لأول مرة، قد يُطلب منك اختيار محرر نصوص مثل nano أو vim. اختر nano لسهولته.

إضافة مهمة جديدة: اذهب إلى نهاية الملف وأضف السطر التالي:

Bash

* * * * * cd /path/to/your/project && php artisan schedule:run >> /dev/null 2>&1
شرح السطر:

* * * * *: هذا يعني "شغّل الأمر كل دقيقة". يقوم Laravel داخليًا بتحديد ما إذا كان يجب تشغيل الأمر stocktake:dispatch-scheduled بناءً على الجدول الزمني الذي حددته في ملف app/Console/Kernel.php (مثلاً ->daily()).

cd /path/to/your/project: مهم جدًا! استبدل /path/to/your/project بالمسار الفعلي لمشروعك على الخادم (مثلاً /var/www/html/my-inventory-app).

&& php artisan schedule:run: هذا هو الأمر الذي يخبر Laravel بتشغيل المهام المجدولة المستحقة.

>> /dev/null 2>&1: هذا الجزء يمنع إرسال أي مخرجات أو رسائل بريد إلكتروني من الـ Cron Job، وهو أمر شائع في بيئة الإنتاج.

حفظ الملف والخروج:

إذا كنت تستخدم nano، اضغط على Ctrl + X، ثم Y للموافقة على الحفظ، ثم Enter.

بهذه الطريقة، سيقوم الخادم بالتحقق كل دقيقة من وجود مهام مجدولة في Laravel وتشغيلها في وقتها المحدد.
